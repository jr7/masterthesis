% arara: pdflatex
% arara: biber
% arara: pdflatex

\documentclass[11pt,a4paper,headsepline,bibliography=totoc,idxtotoc,DIV12,openright,twoside=true,chapterprefix=on]{scrbook}
%draft zum Schluss
\listfiles

\renewcommand*{\chapterheadstartvskip}{\vspace*{5cm}} %rausnehmen scrbook
%\pagestyle{myheadings}
%\markright{Basics}

\addtokomafont{pageheadfoot}{\linespread{1}\selectfont}
\usepackage[rflt]{floatflt}
\usepackage[ngerman, english]{babel}
\usepackage{siunitx}
\usepackage{color}
\usepackage{ragged2e}
\usepackage{breakcites}
\usepackage{microtype}

\usepackage{import}
\usepackage{fancyvrb}
\usepackage[toc,page]{appendix}

\usepackage{algorithmic}


%\setlength{\oddsidemargin}{+1mm}%
%\setlength{\evensidemargin}{-1mm}%
\setlength{\oddsidemargin}{+1pt}%
\setlength{\evensidemargin}{-1pt}%

\usepackage[table]{xcolor}
\usepackage{listings}
\usepackage{bera}% optional; just for the example
\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}


\lstdefinelanguage{json}{
    basicstyle=\tiny\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
        backgroundcolor=\color{background},
        literate=
         *{0}{{{\color{numb}0}}}{1}
          {1}{{{\color{numb}1}}}{1}
          {2}{{{\color{numb}2}}}{1}
          {3}{{{\color{numb}3}}}{1}
          {4}{{{\color{numb}4}}}{1}
          {5}{{{\color{numb}5}}}{1}
          {6}{{{\color{numb}6}}}{1}
          {7}{{{\color{numb}7}}}{1}
          {8}{{{\color{numb}8}}}{1}
          {9}{{{\color{numb}9}}}{1}
          {:}{{{\color{punct}{:}}}}{1}
          {,}{{{\color{punct}{,}}}}{1}
          {\{}{{{\color{delim}{\{}}}}{1}
          {\}}{{{\color{delim}{\}}}}}{1}
          {[}{{{\color{delim}{[}}}}{1}
          {]}{{{\color{delim}{]}}}}{1},
    }


%Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal

% Custom colors
\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
% Python style for highlighting
\newcommand\pythonstyle{\lstset{
language=Python,
otherkeywords={self},             % Add keywords here
basicstyle=\footnotesize\ttfamily,
keywordstyle=\footnotesize\ttfamily\color{deepblue},
emph={MyClass,__init__},          % Custom highlighting
emphstyle=\ttb\color{deepred},    % Custom highlighting style
stringstyle=\color{deepgreen},
frame=tb,                         % Any extra options here
showstringspaces=false          ,  %
rulecolor=\color{black}
}}


% Python environment
\lstnewenvironment{python}[1][]
{
\pythonstyle
\lstset{#1}
}
{}

% Python for external files
\newcommand\pythonexternal[2][]{{
\pythonstyle
\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}



    \usepackage{mathrsfs}

    \usepackage[utf8]{inputenc}
    \usepackage{ulem}
    \usepackage{amsmath,amssymb}
    \usepackage{amsthm}
    %\usepackage{mathtools}
    \usepackage{graphicx}

    \usepackage{graphicx}
    %\usepackage[demo]{graphicx}
    \usepackage{caption}
    %\usepackage{subcaption}
    \newcommand\bmmax{0}
    \usepackage{bm}

    \usepackage{wrapfig}
    \usepackage{sidecap}
    \usepackage{multirow}
    \usepackage{multicol}
    \usepackage{pgf}
    \usepackage{tikz}
    \usetikzlibrary{arrows,automata}
    %\usepackage{pgf}
    \usepackage{subfig}
    \usepackage[inline]{fixme}
    %\usepackage[justification=raggedright,singlelinecheck=false]{caption}
    \usepackage{nicefrac}
    \usepackage{setspace}
    \usepackage{dcolumn}
    %\usepackage{ragged2e}
    \usepackage{caption}
    \captionsetup{format=plain,indention=0cm}
    %\usepackage[sort,nocompress]{cite}
    %\usepackage{achicago}
    %\usepackage[authoryear,square]{natbib}
    \usepackage{hyperref}
    \usepackage{url}
    \hypersetup{colorlinks=true, citecolor=black, filecolor=black, linkcolor=black, urlcolor=black}
    \onehalfspacing
    \usepackage{mathpazo}
    \usepackage{todonotes}
    \usepackage{setspace}
    \usepackage{booktabs}
    \usepackage[stable]{footmisc}

    \usepackage[autostyle]{csquotes}

    \usepackage[
        backend=biber,
        style=alphabetic,
        sortlocale=de_DE,
        natbib=true,
        url=false,
        doi=false,
        eprint=false
    ]{biblatex}

    \addbibresource{../bibliography/MasterThesis.bib}
    \addbibresource{../bibliography/nvidia.bib}

    \usepackage[]{hyperref}
    \hypersetup{
        colorlinks=true,
    }

    \setlength{\emergencystretch}{1em}

    \setlength{\parindent}{0pt} %Unterbindet das Einrücken

    \newcommand*\dif{\mathop{}\!\mathrm{d}}
    \newcommand*\Dif{\mathop{}\!\mathrm{D}}
    \newcommand{\pdn}[2][]{\frac{\partial#1}{\partial#2}}

    \newcommand{\IR}{\mathbb{R}}
    \newcommand{\IB}{\mathbb{B}}
    \newcommand{\IN}{\mathbb{N}}
    \newcommand{\IC}{\mathbb{C}}
    \newcommand{\re}{\mathrm{Re}} % Realteil
    \newcommand{\im}{\mathrm{Im}} % Imaginärteil


    \newcommand\Rey{\mbox{\textit{Re}}}  % Reynolds number
    \newcommand\Pran{\mbox{\textit{Pr}}} % Prandtl number, cf TeX's \Pr product
    \newcommand\Ekman{\mbox{\textit{Ek}}}  % Peclet number
    \newcommand\Ray{\mbox{\textit{Ra}}}  % Peclet number

    \newcommand\Pe{\mbox{\textit{Pe}}}  % Peclet number
    % New definition of square root:
    % it renames \sqrt as \oldsqrt
    \let\oldsqrt\sqrt
    % it defines the new \sqrt in terms of the old one
    \def\sqrt{\mathpalette\DHLhksqrt}
    \def\DHLhksqrt#1#2{%
    \setbox0=\hbox{$#1\oldsqrt{#2\,}$}\dimen0=\ht0
    \advance\dimen0-0.2\ht0
    \setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
    {\box0\lower0.4pt\box2}}

    \DeclareMathOperator*{\argmin}{argmin}
    \DeclareMathOperator*{\argmax}{argmax}
    %\newcommand{\iu}{{i\mkern1mu}}

    \usepackage[explicit]{titlesec}
    \usepackage{lipsum}% just to generate text


    \titleformat{\section}[block]
      {\Large}{\thesection.~#1}{1em}{}

      \titleformat{\subsection}[block]
      {\large}{\thesubsection.~#1}{1em}{}

      \titleformat{\subsubsection}[block]
      {\normalsize}{\thesubsection.~#1}{1em}{}
      %\titlespacing*{\subsection}{0pt}{15pt}{10pt}
      \titlespacing*{\section}{0pt}{25pt}{20pt}

    %\colorlet{myrulecolor}{black}
    \definecolor{myrulecolor}{RGB}{13,105,154}% define the color for the rules

    \titleformat{\chapter}[display]
      {\normalfont\scshape\huge}
      {\hspace*{0pt}\thechapter.~#1}
      {-15pt}
      {\hspace*{-60pt}{\color{myrulecolor}\rule{\dimexpr\textwidth+80pt\relax}{3pt}}\Huge}
    \titleformat{name=\chapter,numberless}[display]
      {\normalfont\scshape\Huge}
      {\hspace*{0pt}#1}
      {-15pt}
      {\hspace*{-110pt}{\color{myrulecolor}\rule{\dimexpr\textwidth+80pt\relax}{3pt}}\Huge}
    \titlespacing*{\chapter}{0pt}{0pt}{30pt}

    %\usepackage{tgpagella}
    \usepackage{fourier}

%\includeonly{chapters/validation/pflow, chapters/validation/hp_flow, chapters/validation/tc_flow, chapters/appendix}
%\includeonly{chapters/validation/tc_flow, chapters/appendix}
%\includeonly{chapters/immersed_boundary}
\includeonly{chapters/outlook}
\begin{document}


\makeatletter
\renewcommand*\env@cases[1][1.2]{%
  \let\@ifnextchar\new@ifnextchar
  \left\lbrace
  \def\arraystretch{#1}%
  \array{@{}l@{\quad}l@{}}%
}
\makeatother

\begin{titlepage}
       %\vspace*{1cm}
       \begin{center}
       \begin{huge}
       %\textbf{Verzweigung in Netzwerken\\[9mm]}
       \textsc{GPU-basierte Immersed Boundary Methoden mit Anwendung auf rotierende Strömungen}
       \rule{0.9\textwidth}{0.4pt}\\
       \textsc{GPU-based Immersed Boundary Methods with Application to Rotating Flows.}\\[1.8cm]
       \end{huge}
       \begin{large}
	Masterarbeit\\[2cm]
	geschrieben am Institut für Geophysik\\
	der Georg-August Universität Göttingen\\[2cm]
       \end{large}
       \begin{large}
       von\\[.5cm]
       Jonas Ruebsam\\
       aus Paderborn\\
       \vfill
       \begin{center}
        \begin{otherlanguage}{ngerman}
       Abgabedatum: \today
        \end{otherlanguage}
       \end{center}
       \end{large}
     \end{center}
\end{titlepage}

\mbox{}
\thispagestyle{empty}
\newpage
\newpage
\pagenumbering{roman}
\thispagestyle{empty}
\vfill
\begin{otherlanguage}{ngerman}
\noindent \textbf{Die Arbeit wurde im Zeitraum vom 17.Dezember 2015 bis \today \ in der Arbeitsgruppe\\ Fluiddynamik
 unter der Betreuung von Prof. Dr. Andreas Tilgner angefertigt. }\\
\end{otherlanguage}

\vfill
\begin{tabbing}
  \hspace{3cm}\=\kill
   Erstgutachter: \quad  Prof. Dr. Andreas Tilgner - Universität Göttingen\\
   Zweitgutachter: \quad  Apl. Prof. Dr. Parlitz - Universität Göttingen\\
\end{tabbing}

\newpage
\mbox{}
\thispagestyle{empty}
\newpage
\setcounter{secnumdepth}{3}

%\newpage
\setcounter{page}{1}
\addtocontents{toc}{\protect\setstretch{1.15}}

\tableofcontents

\cleardoublepage

\setcounter{page}{1}
\pagenumbering{arabic}

\include{chapters/introduction}
\include{chapters/theorie}
\include{chapters/numerik}
\include{chapters/cuda}
\include{chapters/immersed_boundary}

\include{chapters/validation/pflow}
\include{chapters/validation/hp_flow}
\include{chapters/validation/tc_flow}

\include{chapters/cone}
\include{chapters/outlook}

\newpage
\thispagestyle{empty}
\mbox{}

\begin{appendices}
\include{chapters/appendix}
\include{chapters/python_api}
\end{appendices}

\begingroup
\sloppy
\printbibliography
\endgroup

\include{chapters/danksagung}
\include{chapters/declaration}
\end{document}
